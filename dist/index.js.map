{"version":3,"file":"index.js","sources":["../packages/packages/core/src/table.ts"],"sourcesContent":["import { Config } from \"../utils/types/config\";\r\n\r\nlet keys: string[] = [];\r\nlet table = document.createElement(\"table\");\r\nlet container: any;\r\nlet origionalValue: any[];\r\nlet filteredValue: any[];\r\nlet configData: Config;\r\n\r\nconst includeCSSFile = () => {\r\n  const link = document.createElement(\"link\");\r\n  link.rel = \"stylesheet\";\r\n  link.type = \"text/css\";\r\n  link.href = \"../assets/css/index.css\";\r\n  document.head.appendChild(link);\r\n};\r\n\r\nfunction intiTableConfig() {\r\n  table.style.tableLayout = \"fixed\";\r\n  table.style.width = \"100%\";\r\n  const colGroup = document.createElement(\"colgroup\");\r\n  keys.forEach(() => {\r\n    const col = document.createElement(\"col\");\r\n    col.style.width = `${100 / keys.length}%`;\r\n    colGroup.appendChild(col);\r\n  });\r\n  table.appendChild(colGroup);\r\n  table.className = \"sortable-table\";\r\n}\r\n\r\nfunction initTableHeader(keys: string[]) {\r\n  const headerRow = document.createElement(\"tr\");\r\n  keys.forEach((key) => {\r\n    const th = document.createElement(\"th\");\r\n    th.className = \"sortable\";\r\n    th.className = \"text-center\";\r\n    th.textContent = key.toUpperCase();\r\n    headerRow.appendChild(th);\r\n  });\r\n  table.appendChild(headerRow);\r\n}\r\n\r\nfunction initTableData(data: any[]) {\r\n  data.forEach((row) => {\r\n    const tr = document.createElement(\"tr\");\r\n    Object.values(row).forEach((value) => {\r\n      const td = document.createElement(\"td\");\r\n      td.className = \"text-center\";\r\n      td.textContent = value as string;\r\n      tr.appendChild(td);\r\n    });\r\n    table.appendChild(tr);\r\n  });\r\n}\r\n\r\nfunction resetSortingOrder() {\r\n  const headers = table.querySelectorAll(\"th\");\r\n  headers.forEach((header) => {\r\n    header.dataset.sortOrder = \"\";\r\n    header.innerText = header.innerText.replace(\" ▲\", \"\").replace(\" ▼\", \"\");\r\n  });\r\n}\r\n\r\nfunction sortData(data: any[], i: number, sortOrder: \"asc\" | \"desc\") {\r\n  resetSortingOrder();\r\n  const headers = table.querySelectorAll(\"th\");\r\n  headers[i].dataset.sortOrder = sortOrder;\r\n  const iconContainer = document.createElement(\"span\");\r\n  iconContainer.style.marginLeft = \"5px\";\r\n  iconContainer.style.display = \"inline-block\";\r\n  iconContainer.style.width = \"10px\";\r\n  iconContainer.style.height = \"10px\";\r\n  iconContainer.innerHTML =\r\n    sortOrder === \"asc\"\r\n      ? `<svg viewBox=\"0 0 407.436 407.436\"><polygon points=\"203.718,91.567 0,294.621 21.179,315.869 203.718,133.924 386.258,315.869 407.436,294.621\"/></svg>`\r\n      : `<svg viewBox=\"0 0 407.437 407.437\"><polygon points=\"386.258,91.567 203.718,273.512 21.179,91.567 0,112.815 203.718,315.87 407.437,112.815\"/></svg>`;\r\n  headers[i].appendChild(iconContainer);\r\n  headers[i].className = \"text-center\";\r\n  return data.sort((a, b) => {\r\n    if (sortOrder === \"asc\") {\r\n      return a[keys[i]] > b[keys[i]] ? 1 : -1;\r\n    } else {\r\n      return a[keys[i]] < b[keys[i]] ? 1 : -1;\r\n    }\r\n  });\r\n}\r\n\r\nfunction attachSortingFunctionality(data: any[]) {\r\n  const headers = table.querySelectorAll(\"th\");\r\n  for (let i = 0; i < keys.length; i++) {\r\n    headers[i].addEventListener(\"click\", () => {\r\n      const sortOrder = headers[i].dataset.sortOrder === \"asc\" ? \"desc\" : \"asc\";\r\n      headers[i].dataset.sortOrder = sortOrder;\r\n      const sortedData = sortData(data, i, sortOrder);\r\n\r\n      // Clear existing rows except headers\r\n      while (table.rows.length > 1) {\r\n        table.deleteRow(1);\r\n      }\r\n\r\n      // Add sorted rows\r\n      sortedData.forEach((row) => {\r\n        const tr = document.createElement(\"tr\");\r\n        tr.className = \"text-center\";\r\n        Object.values(row).forEach((value) => {\r\n          const td = document.createElement(\"td\");\r\n          td.textContent = value as string;\r\n          tr.appendChild(td);\r\n        });\r\n        table.appendChild(tr);\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\nfunction initializeFilterOption() {\r\n  const filterInput = document.createElement(\"input\");\r\n  filterInput.type = \"text\";\r\n  filterInput.placeholder = \"Filter...\";\r\n  filterInput.className = \"filter-input\";\r\n  container.insertBefore(filterInput, table);\r\n\r\n  let debounceTimer: NodeJS.Timeout;\r\n  filterInput.addEventListener(\"input\", (event: Event) => {\r\n    clearTimeout(debounceTimer);\r\n    debounceTimer = setTimeout(() => {\r\n      const value = (event.target as HTMLInputElement).value\r\n        .trim()\r\n        .toLowerCase();\r\n      filteredValue = value\r\n        ? origionalValue.filter((row) =>\r\n            Object.values(row).some((cell) =>\r\n              String(cell).toLowerCase().includes(value)\r\n            )\r\n          )\r\n        : origionalValue;\r\n\r\n      while (table.rows.length > 1) {\r\n        table.deleteRow(1);\r\n      }\r\n      if (filteredValue.length === 0) {\r\n        const tr = document.createElement(\"tr\");\r\n        const td = document.createElement(\"td\");\r\n        td.colSpan = keys.length;\r\n        td.textContent = \"No items found\";\r\n        td.className = \"text-center\";\r\n        tr.appendChild(td);\r\n        table.appendChild(tr);\r\n      } else {\r\n        initTableData(filteredValue);\r\n      }\r\n      resetSortingOrder();\r\n    }, 300);\r\n  });\r\n}\r\n\r\nexport const init = ({\r\n  data,\r\n  config,\r\n}: {\r\n  data: any[];\r\n  config?: { includeSortings: boolean; includeFilter: boolean };\r\n}) => {\r\n  origionalValue = data;\r\n  filteredValue = data;\r\n  keys = Object.keys(data[0]);\r\n  if (config) {\r\n    configData = config;\r\n  }\r\n  includeCSSFile();\r\n  intiTableConfig();\r\n  initTableHeader(keys);\r\n  initTableData(data);\r\n  if (configData?.includeSortings) {\r\n    attachSortingFunctionality(data);\r\n  }\r\n};\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n  container = document.getElementById(\"sortable-table\");\r\n  if (!container) throw new Error(\"Element with id 'sortable-table' not found\");\r\n  container.appendChild(table);\r\n  if (configData?.includeFilter) {\r\n    initializeFilterOption();\r\n  }\r\n});\r\n"],"names":[],"mappings":"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"}